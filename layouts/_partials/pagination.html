{{ "<!-- layouts/_partials/pagination.html -->" | safeHTML }}

<div class="flex justify-center my-8 text-sm md:col-span-2">
  {{ $page := . }}

  {{ if gt $page.Paginator.TotalPages 1 }}
    <ul class="inline-flex text-base h-10">

    {{/* The left arrow */}}
    {{ with .Paginator }}
      {{ with .Prev }}
        <li>
          <a href="{{ .URL }}" aria-label="Previous"  role="button" class="flex items-center justify-center px-4 h-10 ms-0 rounded-s-lg leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900">&laquo;</a>
        </li>
      {{ else }}
        <li>
          <a aria-disabled="true" aria-label="Previous" role="button" class="flex items-center justify-center px-4 h-10 ms-0 rounded-s-lg leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600">&laquo;</a>
        </li>
      {{ end }}

      {{/* The fixed page 1 block */}}
      {{ if eq .PageNumber 1 }}
        <li>
          <a aria-disabled="true" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600">1</a>
        </li>
      {{ else }}
        <li>
          <a href="{{ .First.URL }}" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900">1</a>
        </li>
      {{ end }}

      {{ $slots := 3 }}
      {{ $start := math.Max 2 (sub .PageNumber (math.Floor (div $slots 2))) }}
      {{ $end := math.Min ( sub .TotalPages 1) (sub (add $start $slots) 1) }}

      {{ if le .TotalPages $start }}
        {{ $start = math.Max 0 (add (sub $end $slots) 1) }}
      {{ end }}
      {{ if lt $end $slots }}
        {{ $end = math.Max 0 (sub (add $start .TotalPages) 3) }}
      {{ end }}

      {{/* The page block window */}}
      {{ if or (gt $start 0) (gt $end 0) }}

        {{ range $i, $k := seq $start $end }}

          {{ if not $i }}
            {{ if gt $k 2 }}
              &nbsp;&nbsp;
            {{ end }}
          {{ end }}

          {{ if eq $.Paginator.PageNumber $k }}
            <li>
              <a aria-current="page" aria-label="Page {{ $k }}" class="flex items-center justify-center px-4 h-10 leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600" role="button">{{ $k }}</a>
            </li>
          {{ else }}
            <li>
              <a href="{{ (index $.Paginator.Pagers (sub $k 1)).URL }}" aria-label="Page {{ $k }}" class="flex items-center justify-center px-4 h-10 leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900" role="button">{{ $k }}</a>
            </li>
          {{ end }}

          {{ if eq $i (sub $slots 1) }}
            {{ if ne $.Paginator.PageNumber (sub $.Paginator.TotalPages 2) }}
              &nbsp;&nbsp;
            {{ end }}
          {{ end }}
        {{ end }}
      {{ end }}

      {{/* The fixed last page block */}}
      {{ if eq .PageNumber .TotalPages }}
        <li>
          <a aria-disabled="true" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600">{{ .TotalPages }}</a>
        </li>
      {{ else }}
        <li>
          <a href="{{ .Last.URL }}" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900">{{ .TotalPages }}</a>
        </li>
      {{ end }}

      {{/* The right arrow */}}
      {{ with .Next }}
        <li>
          <a href="{{ .URL }}" aria-label="Next" class="flex items-center justify-center px-4 h-10 leading-tight text-black bg-white border border-gray-300 rounded-e-lg hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900" role="button"><span aria-hidden="true">&raquo;</span></a>
        </li>
      {{ else }}
        <li>
          <a aria-disabled="true" aria-label="Next" class="flex items-center justify-center px-4 h-10 leading-tight text-gray-400 bg-white border border-gray-300 rounded-e-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600" role="button" tabindex="-1"><span aria-hidden="true">&raquo;</span></a>
        </li>
      {{ end }}
    {{ end }}
    </ul>
  {{ end }}
</div>
