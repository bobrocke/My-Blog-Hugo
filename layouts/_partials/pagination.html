{{ "<!-- layouts/_partials/pagination.html -->" | safeHTML }}
{{ $page := . }}

<div class="flex justify-center my-8 text-sm md:col-span-2">
  {{ if gt $page.Paginator.TotalPages 1 }}
    <ul class="inline-flex text-base h-10">
      {{ with .Paginator }}
        {{ $start := sub .PageNumber 1 }}

        {{ if lt $start 2 }}
          {{ $start = 2 }}
        {{ end }}

        {{ $end := add $start 2 }}

        {{ if gt $end (sub .TotalPages 1) }}
          {{ $end = sub .TotalPages 1 }}
          {{ $start = sub $end 2 }}
        {{ end }}

        {{/* The left arrow */}}
        {{ with .Prev }}
          <li>
            <a href="{{ .URL }}" aria-label="Previous"  role="button" class="flex items-center justify-center px-4 h-10 ms-0 rounded-s-lg leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900">&laquo;</a>
          </li>
        {{ else }}
          <li>
            <a aria-disabled="true" aria-label="Previous" role="button" class="flex items-center justify-center px-4 h-10 ms-0 rounded-s-lg leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600">&laquo;</a>
          </li>
        {{ end }}

        {{/* The fixed page 1 block */}}
        {{ if eq .PageNumber 1 }}
          <li>
            <a aria-disabled="true" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600">1</a>
          </li>
        {{ else }}
          <li>
            <a href="{{ .First.URL }}" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900">1</a>
          </li>
        {{ end }}

        {{/* The page block window */}}
        {{ if or (gt $start 0) (gt $end 0) }}

          {{ range $i, $k := seq $start $end }}

            {{ if not $i }}
              {{ if gt $k 2 }}
                &nbsp;&nbsp;
              {{ end }}
            {{ end }}

            {{ if eq $.Paginator.PageNumber $k }}
              <li>
                <a aria-current="page" aria-label="Page {{ $k }}" class="flex items-center justify-center px-4 h-10 leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600" role="button">{{ $k }}</a>
              </li>
            {{ else }}
              <li>
                <a href="{{ (index $.Paginator.Pagers (sub $k 1)).URL }}" aria-label="Page {{ $k }}" class="flex items-center justify-center px-4 h-10 leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900" role="button">{{ $k }}</a>
              </li>
            {{ end }}

            {{ if eq $i 2 }}
              {{ if ne $k (sub $.Paginator.TotalPages 1) }}
                &nbsp;&nbsp;
              {{ end }}
            {{ end }}
          {{ end }}
        {{ end }}

        {{/* The fixed last page block */}}
        {{ if eq .PageNumber .TotalPages }}
          <li>
            <a aria-disabled="true" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-gray-400 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600">{{ .TotalPages }}</a>
          </li>
        {{ else }}
          <li>
            <a href="{{ .Last.URL }}" aria-label="Page 1" role="button" class="flex items-center justify-center px-4 h-10 ms-0 leading-tight text-black bg-white border border-gray-300 hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900">{{ .TotalPages }}</a>
          </li>
        {{ end }}

        {{/* The right arrow */}}
        {{ with .Next }}
          <li>
            <a href="{{ .URL }}" aria-label="Next" class="flex items-center justify-center px-4 h-10 leading-tight text-black bg-white border border-gray-300 rounded-e-lg hover:bg-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-900 dark:hover:text-red-900" role="button"><span aria-hidden="true">&raquo;</span></a>
          </li>
        {{ else }}
          <li>
            <a aria-disabled="true" aria-label="Next" class="flex items-center justify-center px-4 h-10 leading-tight text-gray-400 bg-white border border-gray-300 rounded-e-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-600" role="button" tabindex="-1"><span aria-hidden="true">&raquo;</span></a>
          </li>
        {{ end }}
      {{ end }}
    </ul>
  {{ end }}
</div>
